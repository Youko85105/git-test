{"ast":null,"code":"var _jsxFileName = \"/Users/chawsuhan/git-test/sem7-project/project/src/components/NotificationsPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport Navbar from \"./Navbar\";\nimport Footer from \"./Footer\";\nimport { fetchNotifications, markAsRead, markAllRead, deleteNotification } from \"../services/notifications\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst timeAgo = iso => {\n  if (!iso) return \"\";\n  const s = Math.floor((Date.now() - new Date(iso).getTime()) / 1000);\n  if (s < 60) return `${s}s ago`;\n  const m = Math.floor(s / 60);\n  if (m < 60) return `${m}m ago`;\n  const h = Math.floor(m / 60);\n  if (h < 24) return `${h}h ago`;\n  return `${Math.floor(h / 24)}d ago`;\n};\n\n// Decide where to go for each notif\nfunction buildTarget(n) {\n  var _n$metadata, _n$actor_id;\n  // server-provided link takes precedence if you send it\n  if (n !== null && n !== void 0 && (_n$metadata = n.metadata) !== null && _n$metadata !== void 0 && _n$metadata.link) return {\n    path: n.metadata.link,\n    state: undefined\n  };\n  const meta = (n === null || n === void 0 ? void 0 : n.metadata) || {};\n  const type = (n === null || n === void 0 ? void 0 : n.type) || \"\";\n\n  // Most useful: we have a post (and maybe a comment to highlight)\n  if (meta.postId) {\n    const path = `/posts/${meta.postId}`;\n    const state = meta.commentId ? {\n      highlightCommentId: meta.commentId\n    } : undefined;\n\n    // (Optional) also add a query param so either approach can work in PostPage\n    const qp = meta.commentId ? `?comment=${encodeURIComponent(meta.commentId)}` : \"\";\n    return {\n      path: path + qp,\n      state\n    };\n  }\n\n  // If no postId but there’s an actor who’s a creator, let’s show their profile\n  // (your API populates actor_id: { _id, username, profilePic, role } )\n  if ((n === null || n === void 0 ? void 0 : (_n$actor_id = n.actor_id) === null || _n$actor_id === void 0 ? void 0 : _n$actor_id.role) === \"creator\" && (n.actor_id._id || n.actor_id.id)) {\n    return {\n      path: `/creator/${n.actor_id._id || n.actor_id.id}`\n    };\n  }\n\n  // Fallback: stay here\n  return {\n    path: \"/notifications\"\n  };\n}\nexport default function NotificationsPage({\n  isDarkMode,\n  toggleTheme\n}) {\n  _s();\n  const [items, setItems] = useState([]);\n  const [nextCursor, setNextCursor] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [err, setErr] = useState(\"\");\n  const navigate = useNavigate();\n  const wrapperCls = useMemo(() => `min-h-screen transition-colors duration-300 ${isDarkMode ? \"bg-gray-900 text-white\" : \"bg-gray-50 text-gray-900\"}`, [isDarkMode]);\n  const cardCls = isDarkMode ? \"bg-gray-800 border border-gray-700\" : \"bg-white border border-gray-200\";\n  const load = async cursor => {\n    try {\n      setLoading(true);\n      setErr(\"\");\n      const {\n        data\n      } = await fetchNotifications({\n        cursor,\n        limit: 20\n      });\n      const list = Array.isArray(data === null || data === void 0 ? void 0 : data.items) ? data.items : [];\n      setItems(prev => cursor ? [...prev, ...list] : list);\n      setNextCursor((data === null || data === void 0 ? void 0 : data.nextCursor) || null);\n    } catch {\n      setErr(\"Failed to load notifications.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    load();\n  }, []);\n\n  // click a row → mark read (optimistic) → navigate\n  const onOpen = async n => {\n    setItems(prev => prev.map(it => String(it._id) === String(n._id) ? {\n      ...it,\n      is_read: true\n    } : it));\n    try {\n      await markAsRead(n._id);\n      window.dispatchEvent(new CustomEvent(\"notif:changed\")); // navbar badge\n    } catch {\n      // rollback if API failed\n      setItems(prev => prev.map(it => String(it._id) === String(n._id) ? {\n        ...it,\n        is_read: false\n      } : it));\n    }\n    const {\n      path,\n      state\n    } = buildTarget(n);\n    navigate(path, state ? {\n      state\n    } : undefined);\n  };\n  const onDelete = async (n, e) => {\n    e.stopPropagation(); // prevent row click navigation\n    const prev = items;\n    setItems(old => old.filter(x => String(x._id) !== String(n._id)));\n    try {\n      await deleteNotification(n._id);\n    } catch {\n      setItems(prev);\n    }\n  };\n  const onMarkAll = async () => {\n    const prev = items;\n    setItems(old => old.map(n => ({\n      ...n,\n      is_read: true\n    })));\n    try {\n      await markAllRead();\n      window.dispatchEvent(new CustomEvent(\"notif:changed\"));\n    } catch {\n      setItems(prev);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: wrapperCls,\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      isDarkMode: isDarkMode,\n      toggleTheme: toggleTheme\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto px-4 pt-24 pb-16\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `rounded-2xl shadow ${cardCls}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex items-center justify-between px-6 py-4 ${isDarkMode ? \"border-b border-gray-700\" : \"border-b border-gray-200\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-xl font-semibold\",\n            children: \"Notifications\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onMarkAll,\n            className: `text-sm px-3 py-1 rounded-md ${isDarkMode ? \"bg-gray-700 hover:bg-gray-600 text-white\" : \"bg-gray-900 hover:bg-gray-800 text-white\"}`,\n            children: \"Mark all as read\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-6 py-4 text-red-500\",\n          children: err\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 19\n        }, this), !err && items.length === 0 && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-6 py-16 text-center opacity-70\",\n          children: \"No notifications yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"divide-y divide-gray-200 dark:divide-gray-700\",\n          children: items.map(n => {\n            var _actor$profilePic, _n$metadata2, _n$metadata3, _n$metadata4;\n            const actor = n.actor_id; // { username, profilePic, role }\n            const avatar = (actor === null || actor === void 0 ? void 0 : (_actor$profilePic = actor.profilePic) === null || _actor$profilePic === void 0 ? void 0 : _actor$profilePic.url) || (actor === null || actor === void 0 ? void 0 : actor.profilePic) || \"/images/default-avatar.svg\";\n            const title = n.message || ((_n$metadata2 = n.metadata) === null || _n$metadata2 === void 0 ? void 0 : _n$metadata2.title) || \"Notification\";\n            const sub = ((_n$metadata3 = n.metadata) === null || _n$metadata3 === void 0 ? void 0 : _n$metadata3.preview) || ((_n$metadata4 = n.metadata) === null || _n$metadata4 === void 0 ? void 0 : _n$metadata4.snippet) || \"\";\n            const when = timeAgo(n.createdAt);\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              role: \"button\",\n              tabIndex: 0,\n              onClick: () => onOpen(n),\n              onKeyDown: e => {\n                if (e.key === \"Enter\" || e.key === \" \") onOpen(n);\n              },\n              className: `px-6 py-4 flex items-start gap-4 cursor-pointer select-none outline-none ${!n.is_read ? isDarkMode ? \"bg-gray-800/60 hover:bg-gray-700/70\" : \"bg-blue-50/50 hover:bg-blue-50\" : isDarkMode ? \"hover:bg-gray-700/40\" : \"hover:bg-gray-50\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: avatar,\n                alt: (actor === null || actor === void 0 ? void 0 : actor.username) || \"actor\",\n                className: \"w-10 h-10 rounded-full object-cover shrink-0\",\n                onError: e => {\n                  e.currentTarget.src = \"/images/default-avatar.svg\";\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between gap-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-medium truncate\",\n                    children: title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `text-xs ${isDarkMode ? \"text-gray-300\" : \"text-gray-500\"}`,\n                    children: when\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 21\n                }, this), sub && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: `text-sm mt-1 line-clamp-2 ${isDarkMode ? \"text-gray-300\" : \"text-gray-600\"}`,\n                  children: sub\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: e => onDelete(n, e),\n                    className: `text-xs underline ${isDarkMode ? \"text-red-300\" : \"text-red-600\"}`,\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 19\n              }, this), !n.is_read && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mt-1 inline-block w-2 h-2 rounded-full bg-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 21\n              }, this)]\n            }, n._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-6 py-4 flex justify-center\",\n          children: nextCursor && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => load(nextCursor),\n            disabled: loading,\n            className: `px-4 py-2 rounded-md ${isDarkMode ? \"bg-gray-700 hover:bg-gray-600 text-white\" : \"bg-gray-900 hover:bg-gray-800 text-white\"}`,\n            children: loading ? \"Loading...\" : \"Load more\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {\n      isDarkMode: isDarkMode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n}\n_s(NotificationsPage, \"/GmlJUMXwHzdHH9U4BYJX9m98Jk=\", false, function () {\n  return [useNavigate];\n});\n_c = NotificationsPage;\nvar _c;\n$RefreshReg$(_c, \"NotificationsPage\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","Navbar","Footer","fetchNotifications","markAsRead","markAllRead","deleteNotification","useNavigate","jsxDEV","_jsxDEV","timeAgo","iso","s","Math","floor","Date","now","getTime","m","h","buildTarget","n","_n$metadata","_n$actor_id","metadata","link","path","state","undefined","meta","type","postId","commentId","highlightCommentId","qp","encodeURIComponent","actor_id","role","_id","id","NotificationsPage","isDarkMode","toggleTheme","_s","items","setItems","nextCursor","setNextCursor","loading","setLoading","err","setErr","navigate","wrapperCls","cardCls","load","cursor","data","limit","list","Array","isArray","prev","onOpen","map","it","String","is_read","window","dispatchEvent","CustomEvent","onDelete","e","stopPropagation","old","filter","x","onMarkAll","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","length","_actor$profilePic","_n$metadata2","_n$metadata3","_n$metadata4","actor","avatar","profilePic","url","title","message","sub","preview","snippet","when","createdAt","tabIndex","onKeyDown","key","src","alt","username","onError","currentTarget","disabled","_c","$RefreshReg$"],"sources":["/Users/chawsuhan/git-test/sem7-project/project/src/components/NotificationsPage.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport Navbar from \"./Navbar\";\r\nimport Footer from \"./Footer\";\r\nimport {\r\n  fetchNotifications,\r\n  markAsRead,\r\n  markAllRead,\r\n  deleteNotification,\r\n} from \"../services/notifications\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst timeAgo = (iso) => {\r\n  if (!iso) return \"\";\r\n  const s = Math.floor((Date.now() - new Date(iso).getTime()) / 1000);\r\n  if (s < 60) return `${s}s ago`;\r\n  const m = Math.floor(s / 60);\r\n  if (m < 60) return `${m}m ago`;\r\n  const h = Math.floor(m / 60);\r\n  if (h < 24) return `${h}h ago`;\r\n  return `${Math.floor(h / 24)}d ago`;\r\n};\r\n\r\n// Decide where to go for each notif\r\nfunction buildTarget(n) {\r\n  // server-provided link takes precedence if you send it\r\n  if (n?.metadata?.link) return { path: n.metadata.link, state: undefined };\r\n\r\n  const meta = n?.metadata || {};\r\n  const type = n?.type || \"\";\r\n\r\n  // Most useful: we have a post (and maybe a comment to highlight)\r\n  if (meta.postId) {\r\n    const path = `/posts/${meta.postId}`;\r\n    const state = meta.commentId ? { highlightCommentId: meta.commentId } : undefined;\r\n\r\n    // (Optional) also add a query param so either approach can work in PostPage\r\n    const qp = meta.commentId ? `?comment=${encodeURIComponent(meta.commentId)}` : \"\";\r\n    return { path: path + qp, state };\r\n  }\r\n\r\n  // If no postId but there’s an actor who’s a creator, let’s show their profile\r\n  // (your API populates actor_id: { _id, username, profilePic, role } )\r\n  if (n?.actor_id?.role === \"creator\" && (n.actor_id._id || n.actor_id.id)) {\r\n    return { path: `/creator/${n.actor_id._id || n.actor_id.id}` };\r\n  }\r\n\r\n  // Fallback: stay here\r\n  return { path: \"/notifications\" };\r\n}\r\n\r\nexport default function NotificationsPage({ isDarkMode, toggleTheme }) {\r\n  const [items, setItems] = useState([]);\r\n  const [nextCursor, setNextCursor] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [err, setErr] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const wrapperCls = useMemo(\r\n    () =>\r\n      `min-h-screen transition-colors duration-300 ${\r\n        isDarkMode ? \"bg-gray-900 text-white\" : \"bg-gray-50 text-gray-900\"\r\n      }`,\r\n    [isDarkMode]\r\n  );\r\n  const cardCls = isDarkMode\r\n    ? \"bg-gray-800 border border-gray-700\"\r\n    : \"bg-white border border-gray-200\";\r\n\r\n  const load = async (cursor) => {\r\n    try {\r\n      setLoading(true);\r\n      setErr(\"\");\r\n      const { data } = await fetchNotifications({ cursor, limit: 20 });\r\n      const list = Array.isArray(data?.items) ? data.items : [];\r\n      setItems((prev) => (cursor ? [...prev, ...list] : list));\r\n      setNextCursor(data?.nextCursor || null);\r\n    } catch {\r\n      setErr(\"Failed to load notifications.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => { load(); }, []);\r\n\r\n  // click a row → mark read (optimistic) → navigate\r\n  const onOpen = async (n) => {\r\n    setItems((prev) =>\r\n      prev.map((it) => (String(it._id) === String(n._id) ? { ...it, is_read: true } : it))\r\n    );\r\n    try {\r\n      await markAsRead(n._id);\r\n      window.dispatchEvent(new CustomEvent(\"notif:changed\")); // navbar badge\r\n    } catch {\r\n      // rollback if API failed\r\n      setItems((prev) =>\r\n        prev.map((it) => (String(it._id) === String(n._id) ? { ...it, is_read: false } : it))\r\n      );\r\n    }\r\n\r\n    const { path, state } = buildTarget(n);\r\n    navigate(path, state ? { state } : undefined);\r\n  };\r\n\r\n  const onDelete = async (n, e) => {\r\n    e.stopPropagation(); // prevent row click navigation\r\n    const prev = items;\r\n    setItems((old) => old.filter((x) => String(x._id) !== String(n._id)));\r\n    try {\r\n      await deleteNotification(n._id);\r\n    } catch {\r\n      setItems(prev);\r\n    }\r\n  };\r\n\r\n  const onMarkAll = async () => {\r\n    const prev = items;\r\n    setItems((old) => old.map((n) => ({ ...n, is_read: true })));\r\n    try {\r\n      await markAllRead();\r\n      window.dispatchEvent(new CustomEvent(\"notif:changed\"));\r\n    } catch {\r\n      setItems(prev);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={wrapperCls}>\r\n      <Navbar isDarkMode={isDarkMode} toggleTheme={toggleTheme} />\r\n\r\n      <div className=\"max-w-3xl mx-auto px-4 pt-24 pb-16\">\r\n        <div className={`rounded-2xl shadow ${cardCls}`}>\r\n          <div\r\n            className={`flex items-center justify-between px-6 py-4 ${\r\n              isDarkMode ? \"border-b border-gray-700\" : \"border-b border-gray-200\"\r\n            }`}\r\n          >\r\n            <h1 className=\"text-xl font-semibold\">Notifications</h1>\r\n            <button\r\n              onClick={onMarkAll}\r\n              className={`text-sm px-3 py-1 rounded-md ${\r\n                isDarkMode\r\n                  ? \"bg-gray-700 hover:bg-gray-600 text-white\"\r\n                  : \"bg-gray-900 hover:bg-gray-800 text-white\"\r\n              }`}\r\n            >\r\n              Mark all as read\r\n            </button>\r\n          </div>\r\n\r\n          {err && <div className=\"px-6 py-4 text-red-500\">{err}</div>}\r\n\r\n          {!err && items.length === 0 && !loading && (\r\n            <div className=\"px-6 py-16 text-center opacity-70\">No notifications yet.</div>\r\n          )}\r\n\r\n          <ul className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n            {items.map((n) => {\r\n              const actor = n.actor_id; // { username, profilePic, role }\r\n              const avatar =\r\n                actor?.profilePic?.url || actor?.profilePic || \"/images/default-avatar.svg\";\r\n              const title = n.message || n.metadata?.title || \"Notification\";\r\n              const sub = n.metadata?.preview || n.metadata?.snippet || \"\";\r\n              const when = timeAgo(n.createdAt);\r\n\r\n              return (\r\n                <li\r\n                  key={n._id}\r\n                  role=\"button\"\r\n                  tabIndex={0}\r\n                  onClick={() => onOpen(n)}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === \"Enter\" || e.key === \" \") onOpen(n);\r\n                  }}\r\n                  className={`px-6 py-4 flex items-start gap-4 cursor-pointer select-none outline-none ${\r\n                    !n.is_read\r\n                      ? isDarkMode\r\n                        ? \"bg-gray-800/60 hover:bg-gray-700/70\"\r\n                        : \"bg-blue-50/50 hover:bg-blue-50\"\r\n                      : isDarkMode\r\n                      ? \"hover:bg-gray-700/40\"\r\n                      : \"hover:bg-gray-50\"\r\n                  }`}\r\n                >\r\n                  <img\r\n                    src={avatar}\r\n                    alt={actor?.username || \"actor\"}\r\n                    className=\"w-10 h-10 rounded-full object-cover shrink-0\"\r\n                    onError={(e) => {\r\n                      e.currentTarget.src = \"/images/default-avatar.svg\";\r\n                    }}\r\n                  />\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-center justify-between gap-4\">\r\n                      <p className=\"font-medium truncate\">{title}</p>\r\n                      <span\r\n                        className={`text-xs ${isDarkMode ? \"text-gray-300\" : \"text-gray-500\"}`}\r\n                      >\r\n                        {when}\r\n                      </span>\r\n                    </div>\r\n                    {sub && (\r\n                      <p\r\n                        className={`text-sm mt-1 line-clamp-2 ${\r\n                          isDarkMode ? \"text-gray-300\" : \"text-gray-600\"\r\n                        }`}\r\n                      >\r\n                        {sub}\r\n                      </p>\r\n                    )}\r\n                    <div className=\"mt-2\">\r\n                      <button\r\n                        onClick={(e) => onDelete(n, e)}\r\n                        className={`text-xs underline ${\r\n                          isDarkMode ? \"text-red-300\" : \"text-red-600\"\r\n                        }`}\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  {!n.is_read && (\r\n                    <span className=\"mt-1 inline-block w-2 h-2 rounded-full bg-blue-500\" />\r\n                  )}\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n\r\n          <div className=\"px-6 py-4 flex justify-center\">\r\n            {nextCursor && (\r\n              <button\r\n                onClick={() => load(nextCursor)}\r\n                disabled={loading}\r\n                className={`px-4 py-2 rounded-md ${\r\n                  isDarkMode\r\n                    ? \"bg-gray-700 hover:bg-gray-600 text-white\"\r\n                    : \"bg-gray-900 hover:bg-gray-800 text-white\"\r\n                }`}\r\n              >\r\n                {loading ? \"Loading...\" : \"Load more\"}\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Footer isDarkMode={isDarkMode} />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}