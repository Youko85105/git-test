{"ast":null,"code":"import { makeRequest } from \"./api\";\n\n// createComment function (frontend)\nexport function createComment({\n  postId,\n  message,\n  parentId\n}) {\n  const token = localStorage.getItem('authToken'); // Get the JWT token from localStorage\n\n  if (!token) {\n    return Promise.reject('User is not authenticated');\n  }\n  return makeRequest(`/posts/${postId}/comments`, {\n    method: \"POST\",\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      // Pass the token in the Authorization header\n      'Content-Type': 'application/json' // Ensure the request body is JSON\n    },\n    data: {\n      message,\n      parentId\n    } // Do not pass the user explicitly, as the backend extracts it from the token\n  });\n}\nexport function updateComment({\n  message,\n  id,\n  userId\n}) {\n  return makeRequest(`/comments/${id}`, {\n    method: \"PUT\",\n    data: {\n      message,\n      userId\n    }\n  });\n}\nexport function deleteComment({\n  id,\n  userId\n}) {\n  return makeRequest(`/comments/${id}`, {\n    method: \"DELETE\",\n    data: {\n      userId\n    }\n  });\n}\nexport function toggleCommentLike({\n  id: commentId,\n  userId\n}) {\n  return makeRequest(`/likes/toggle`, {\n    method: \"POST\",\n    data: {\n      user: userId,\n      commentId\n    }\n  });\n}\nexport function getPost(postId) {\n  return makeRequest(`/posts/${postId}`);\n}\n\n// This function makes a request to get the current user data based on the JWT token.\nexport function getCurrentUser(token) {\n  return fetch('/api/auth/user', {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${token}` // Pass token in Authorization header\n    }\n  }).then(response => response.json()).then(data => data.user) // Assume the response contains a 'user' object\n  .catch(error => {\n    console.error('Error fetching current user:', error);\n    throw error;\n  });\n}","map":{"version":3,"names":["makeRequest","createComment","postId","message","parentId","token","localStorage","getItem","Promise","reject","method","headers","data","updateComment","id","userId","deleteComment","toggleCommentLike","commentId","user","getPost","getCurrentUser","fetch","then","response","json","catch","error","console"],"sources":["/Users/chawsuhan/git-test/sem7-project/project/src/services/comments.js"],"sourcesContent":["import { makeRequest } from \"./api\";\n\n// createComment function (frontend)\nexport function createComment({ postId, message, parentId }) {\n  const token = localStorage.getItem('authToken');  // Get the JWT token from localStorage\n  \n  if (!token) {\n    return Promise.reject('User is not authenticated');\n  }\n\n  return makeRequest(`/posts/${postId}/comments`, {\n    method: \"POST\",\n    headers: {\n      'Authorization': `Bearer ${token}`,  // Pass the token in the Authorization header\n      'Content-Type': 'application/json',  // Ensure the request body is JSON\n    },\n    data: { message, parentId },  // Do not pass the user explicitly, as the backend extracts it from the token\n  });\n}\n\n\nexport function updateComment({ message, id, userId }) {\n  return makeRequest(`/comments/${id}`, {\n    method: \"PUT\",\n    data: { message, userId },\n  });\n}\n\nexport function deleteComment({ id, userId }) {\n  return makeRequest(`/comments/${id}`, {\n    method: \"DELETE\",\n    data: { userId },\n  });\n}\n\nexport function toggleCommentLike({ id: commentId, userId }) {\n  return makeRequest(`/likes/toggle`, {\n    method: \"POST\",\n    data: { user: userId, commentId },\n  });\n}\n\nexport function getPost(postId) {\n  return makeRequest(`/posts/${postId}`);\n}\n\n// This function makes a request to get the current user data based on the JWT token.\nexport function getCurrentUser(token) {\n  return fetch('/api/auth/user', {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${token}`,  // Pass token in Authorization header\n    },\n  })\n    .then(response => response.json())\n    .then(data => data.user)  // Assume the response contains a 'user' object\n    .catch(error => {\n      console.error('Error fetching current user:', error);\n      throw error;\n    });\n}"],"mappings":"AAAA,SAASA,WAAW,QAAQ,OAAO;;AAEnC;AACA,OAAO,SAASC,aAAaA,CAAC;EAAEC,MAAM;EAAEC,OAAO;EAAEC;AAAS,CAAC,EAAE;EAC3D,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAE;;EAElD,IAAI,CAACF,KAAK,EAAE;IACV,OAAOG,OAAO,CAACC,MAAM,CAAC,2BAA2B,CAAC;EACpD;EAEA,OAAOT,WAAW,CAAC,UAAUE,MAAM,WAAW,EAAE;IAC9CQ,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,eAAe,EAAE,UAAUN,KAAK,EAAE;MAAG;MACrC,cAAc,EAAE,kBAAkB,CAAG;IACvC,CAAC;IACDO,IAAI,EAAE;MAAET,OAAO;MAAEC;IAAS,CAAC,CAAG;EAChC,CAAC,CAAC;AACJ;AAGA,OAAO,SAASS,aAAaA,CAAC;EAAEV,OAAO;EAAEW,EAAE;EAAEC;AAAO,CAAC,EAAE;EACrD,OAAOf,WAAW,CAAC,aAAac,EAAE,EAAE,EAAE;IACpCJ,MAAM,EAAE,KAAK;IACbE,IAAI,EAAE;MAAET,OAAO;MAAEY;IAAO;EAC1B,CAAC,CAAC;AACJ;AAEA,OAAO,SAASC,aAAaA,CAAC;EAAEF,EAAE;EAAEC;AAAO,CAAC,EAAE;EAC5C,OAAOf,WAAW,CAAC,aAAac,EAAE,EAAE,EAAE;IACpCJ,MAAM,EAAE,QAAQ;IAChBE,IAAI,EAAE;MAAEG;IAAO;EACjB,CAAC,CAAC;AACJ;AAEA,OAAO,SAASE,iBAAiBA,CAAC;EAAEH,EAAE,EAAEI,SAAS;EAAEH;AAAO,CAAC,EAAE;EAC3D,OAAOf,WAAW,CAAC,eAAe,EAAE;IAClCU,MAAM,EAAE,MAAM;IACdE,IAAI,EAAE;MAAEO,IAAI,EAAEJ,MAAM;MAAEG;IAAU;EAClC,CAAC,CAAC;AACJ;AAEA,OAAO,SAASE,OAAOA,CAAClB,MAAM,EAAE;EAC9B,OAAOF,WAAW,CAAC,UAAUE,MAAM,EAAE,CAAC;AACxC;;AAEA;AACA,OAAO,SAASmB,cAAcA,CAAChB,KAAK,EAAE;EACpC,OAAOiB,KAAK,CAAC,gBAAgB,EAAE;IAC7BZ,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MACP,eAAe,EAAE,UAAUN,KAAK,EAAE,CAAG;IACvC;EACF,CAAC,CAAC,CACCkB,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACX,IAAI,IAAIA,IAAI,CAACO,IAAI,CAAC,CAAE;EAAA,CACzBO,KAAK,CAACC,KAAK,IAAI;IACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;IACpD,MAAMA,KAAK;EACb,CAAC,CAAC;AACN","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}