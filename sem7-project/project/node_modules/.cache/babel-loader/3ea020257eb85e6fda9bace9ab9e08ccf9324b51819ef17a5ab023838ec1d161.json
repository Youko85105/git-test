{"ast":null,"code":"var _jsxFileName = \"/Users/chawsuhan/git-test/sem7-project/project/src/components/Avatar.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\n\n// keep a tiny in-memory cache so previously loaded URLs don't re-skeleton\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst loadedCache = new Set();\nexport default function Avatar({\n  src,\n  alt = \"avatar\",\n  className = \"\",\n  size = 40,\n  // px\n  rounded = true\n}) {\n  _s();\n  const [loaded, setLoaded] = useState(src ? loadedCache.has(src) : false);\n  const [errored, setErrored] = useState(false);\n  useEffect(() => {\n    if (!src) return;\n    if (loadedCache.has(src)) {\n      setLoaded(true);\n      return;\n    }\n    const img = new Image();\n    img.onload = () => {\n      loadedCache.add(src);\n      setLoaded(true);\n    };\n    img.onerror = () => setErrored(true);\n    img.src = src;\n  }, [src]);\n  const radiusCls = rounded ? \"rounded-full\" : \"rounded-lg\";\n  const sizeStyle = {\n    width: size,\n    height: size\n  };\n\n  // if no src or error, show a neutral skeleton (no silhouette flash)\n  if (!src || errored) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `bg-gray-300 dark:bg-gray-700 ${radiusCls} ${className}`,\n      style: sizeStyle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `relative overflow-hidden ${radiusCls} ${className}`,\n    style: sizeStyle,\n    children: [!loaded && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 animate-pulse bg-gray-300 dark:bg-gray-700\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: src,\n      alt: alt,\n      className: `w-full h-full object-cover transition-opacity duration-200 ${loaded ? \"opacity-100\" : \"opacity-0\"}`,\n      loading: \"lazy\",\n      decoding: \"async\",\n      referrerPolicy: \"no-referrer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(Avatar, \"Ecku9OrYxZvP/A6Py/8TU2++5Mk=\");\n_c = Avatar;\nvar _c;\n$RefreshReg$(_c, \"Avatar\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","loadedCache","Set","Avatar","src","alt","className","size","rounded","_s","loaded","setLoaded","has","errored","setErrored","img","Image","onload","add","onerror","radiusCls","sizeStyle","width","height","style","fileName","_jsxFileName","lineNumber","columnNumber","children","loading","decoding","referrerPolicy","_c","$RefreshReg$"],"sources":["/Users/chawsuhan/git-test/sem7-project/project/src/components/Avatar.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\n// keep a tiny in-memory cache so previously loaded URLs don't re-skeleton\nconst loadedCache = new Set();\n\nexport default function Avatar({\n  src,\n  alt = \"avatar\",\n  className = \"\",\n  size = 40, // px\n  rounded = true,\n}) {\n  const [loaded, setLoaded] = useState(src ? loadedCache.has(src) : false);\n  const [errored, setErrored] = useState(false);\n\n  useEffect(() => {\n    if (!src) return;\n    if (loadedCache.has(src)) { setLoaded(true); return; }\n\n    const img = new Image();\n    img.onload = () => { loadedCache.add(src); setLoaded(true); };\n    img.onerror = () => setErrored(true);\n    img.src = src;\n  }, [src]);\n\n  const radiusCls = rounded ? \"rounded-full\" : \"rounded-lg\";\n  const sizeStyle = { width: size, height: size };\n\n  // if no src or error, show a neutral skeleton (no silhouette flash)\n  if (!src || errored) {\n    return (\n      <div\n        className={`bg-gray-300 dark:bg-gray-700 ${radiusCls} ${className}`}\n        style={sizeStyle}\n      />\n    );\n  }\n\n  return (\n    <div\n      className={`relative overflow-hidden ${radiusCls} ${className}`}\n      style={sizeStyle}\n    >\n      {/* skeleton until loaded */}\n      {!loaded && <div className=\"absolute inset-0 animate-pulse bg-gray-300 dark:bg-gray-700\" />}\n\n      <img\n        src={src}\n        alt={alt}\n        className={`w-full h-full object-cover transition-opacity duration-200 ${loaded ? \"opacity-100\" : \"opacity-0\"}`}\n        loading=\"lazy\"\n        decoding=\"async\"\n        referrerPolicy=\"no-referrer\"\n      />\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;;AAElD;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,WAAW,GAAG,IAAIC,GAAG,CAAC,CAAC;AAE7B,eAAe,SAASC,MAAMA,CAAC;EAC7BC,GAAG;EACHC,GAAG,GAAG,QAAQ;EACdC,SAAS,GAAG,EAAE;EACdC,IAAI,GAAG,EAAE;EAAE;EACXC,OAAO,GAAG;AACZ,CAAC,EAAE;EAAAC,EAAA;EACD,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAACM,GAAG,GAAGH,WAAW,CAACW,GAAG,CAACR,GAAG,CAAC,GAAG,KAAK,CAAC;EACxE,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EAE7CD,SAAS,CAAC,MAAM;IACd,IAAI,CAACO,GAAG,EAAE;IACV,IAAIH,WAAW,CAACW,GAAG,CAACR,GAAG,CAAC,EAAE;MAAEO,SAAS,CAAC,IAAI,CAAC;MAAE;IAAQ;IAErD,MAAMI,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;IACvBD,GAAG,CAACE,MAAM,GAAG,MAAM;MAAEhB,WAAW,CAACiB,GAAG,CAACd,GAAG,CAAC;MAAEO,SAAS,CAAC,IAAI,CAAC;IAAE,CAAC;IAC7DI,GAAG,CAACI,OAAO,GAAG,MAAML,UAAU,CAAC,IAAI,CAAC;IACpCC,GAAG,CAACX,GAAG,GAAGA,GAAG;EACf,CAAC,EAAE,CAACA,GAAG,CAAC,CAAC;EAET,MAAMgB,SAAS,GAAGZ,OAAO,GAAG,cAAc,GAAG,YAAY;EACzD,MAAMa,SAAS,GAAG;IAAEC,KAAK,EAAEf,IAAI;IAAEgB,MAAM,EAAEhB;EAAK,CAAC;;EAE/C;EACA,IAAI,CAACH,GAAG,IAAIS,OAAO,EAAE;IACnB,oBACEb,OAAA;MACEM,SAAS,EAAE,gCAAgCc,SAAS,IAAId,SAAS,EAAG;MACpEkB,KAAK,EAAEH;IAAU;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClB,CAAC;EAEN;EAEA,oBACE5B,OAAA;IACEM,SAAS,EAAE,4BAA4Bc,SAAS,IAAId,SAAS,EAAG;IAChEkB,KAAK,EAAEH,SAAU;IAAAQ,QAAA,GAGhB,CAACnB,MAAM,iBAAIV,OAAA;MAAKM,SAAS,EAAC;IAA6D;MAAAmB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAE3F5B,OAAA;MACEI,GAAG,EAAEA,GAAI;MACTC,GAAG,EAAEA,GAAI;MACTC,SAAS,EAAE,8DAA8DI,MAAM,GAAG,aAAa,GAAG,WAAW,EAAG;MAChHoB,OAAO,EAAC,MAAM;MACdC,QAAQ,EAAC,OAAO;MAChBC,cAAc,EAAC;IAAa;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7B,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV;AAACnB,EAAA,CAnDuBN,MAAM;AAAA8B,EAAA,GAAN9B,MAAM;AAAA,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}