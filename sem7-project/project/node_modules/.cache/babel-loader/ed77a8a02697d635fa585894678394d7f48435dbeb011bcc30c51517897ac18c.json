{"ast":null,"code":"import axios from \"axios\";\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL,\n  // Use the base URL from your .env file\n  withCredentials: true // Ensure cookies are included with requests if needed\n});\n\n// Add Authorization header with the token (if available) to all requests\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\"); // Get token from localStorage\n  if (token) {\n    config.headers[\"Authorization\"] = `Bearer ${token}`; // Add token to Authorization header\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\nexport function makeRequest(url, options = {}) {\n  if (options.method === \"DELETE\" && options.data) {\n    return api.delete(url, {\n      data: options.data\n    }).then(res => res.data).catch(error => {\n      var _error$response$data$, _error$response, _error$response$data;\n      return Promise.reject((_error$response$data$ = error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) !== null && _error$response$data$ !== void 0 ? _error$response$data$ : \"Something went wrong\");\n    });\n  }\n  return api(url, options).then(res => res.data).catch(error => {\n    var _error$response$data$2, _error$response2, _error$response2$data;\n    return Promise.reject((_error$response$data$2 = error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) !== null && _error$response$data$2 !== void 0 ? _error$response$data$2 : \"Something went wrong\");\n  });\n}","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","withCredentials","interceptors","request","use","config","token","localStorage","getItem","headers","error","Promise","reject","makeRequest","url","options","method","data","delete","then","res","catch","_error$response$data$","_error$response","_error$response$data","response","message","_error$response$data$2","_error$response2","_error$response2$data"],"sources":["/Users/chawsuhan/git-test/sem7-project/project/src/services/makeRequest.js"],"sourcesContent":["import axios from \"axios\";\n\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL, // Use the base URL from your .env file\n  withCredentials: true,  // Ensure cookies are included with requests if needed\n});\n\n// Add Authorization header with the token (if available) to all requests\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem(\"token\");  // Get token from localStorage\n    if (token) {\n      config.headers[\"Authorization\"] = `Bearer ${token}`;  // Add token to Authorization header\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\nexport function makeRequest(url, options = {}) {\n  if (options.method === \"DELETE\" && options.data) {\n    return api.delete(url, { data: options.data })\n      .then(res => res.data)\n      .catch(error => Promise.reject(error?.response?.data?.message ?? \"Something went wrong\"));\n  }\n\n  return api(url, options)\n    .then(res => res.data)\n    .catch(error => Promise.reject(error?.response?.data?.message ?? \"Something went wrong\"));\n}\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC;EACvBC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB;EAAE;EACxCC,eAAe,EAAE,IAAI,CAAG;AAC1B,CAAC,CAAC;;AAEF;AACAN,GAAG,CAACO,YAAY,CAACC,OAAO,CAACC,GAAG,CACzBC,MAAM,IAAK;EACV,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAE;EAC9C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACI,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUH,KAAK,EAAE,CAAC,CAAE;EACxD;EACA,OAAOD,MAAM;AACf,CAAC,EACAK,KAAK,IAAK;EACT,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,OAAO,SAASG,WAAWA,CAACC,GAAG,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EAC7C,IAAIA,OAAO,CAACC,MAAM,KAAK,QAAQ,IAAID,OAAO,CAACE,IAAI,EAAE;IAC/C,OAAOtB,GAAG,CAACuB,MAAM,CAACJ,GAAG,EAAE;MAAEG,IAAI,EAAEF,OAAO,CAACE;IAAK,CAAC,CAAC,CAC3CE,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACH,IAAI,CAAC,CACrBI,KAAK,CAACX,KAAK;MAAA,IAAAY,qBAAA,EAAAC,eAAA,EAAAC,oBAAA;MAAA,OAAIb,OAAO,CAACC,MAAM,EAAAU,qBAAA,GAACZ,KAAK,aAALA,KAAK,wBAAAa,eAAA,GAALb,KAAK,CAAEe,QAAQ,cAAAF,eAAA,wBAAAC,oBAAA,GAAfD,eAAA,CAAiBN,IAAI,cAAAO,oBAAA,uBAArBA,oBAAA,CAAuBE,OAAO,cAAAJ,qBAAA,cAAAA,qBAAA,GAAI,sBAAsB,CAAC;IAAA,EAAC;EAC7F;EAEA,OAAO3B,GAAG,CAACmB,GAAG,EAAEC,OAAO,CAAC,CACrBI,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACH,IAAI,CAAC,CACrBI,KAAK,CAACX,KAAK;IAAA,IAAAiB,sBAAA,EAAAC,gBAAA,EAAAC,qBAAA;IAAA,OAAIlB,OAAO,CAACC,MAAM,EAAAe,sBAAA,GAACjB,KAAK,aAALA,KAAK,wBAAAkB,gBAAA,GAALlB,KAAK,CAAEe,QAAQ,cAAAG,gBAAA,wBAAAC,qBAAA,GAAfD,gBAAA,CAAiBX,IAAI,cAAAY,qBAAA,uBAArBA,qBAAA,CAAuBH,OAAO,cAAAC,sBAAA,cAAAA,sBAAA,GAAI,sBAAsB,CAAC;EAAA,EAAC;AAC7F","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}