{"ast":null,"code":"var _jsxFileName = \"/Users/chawsuhan/Music/git-test/sem7-project/project/src/components/CreatorProfile.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { getCreatorPosts, getMyPosts } from '../services/posts';\nimport { useAuth } from '../AuthContext';\nimport Navbar from './Navbar';\nimport PostCard from \"./PostCard\";\n\n// lightweight inline icons (no library)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Icon = {\n  Heart: props => /*#__PURE__*/_jsxDEV(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\",\n    className: \"w-4 h-4\",\n    ...props,\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M12 21s-7.2-4.35-9.6-8.4C.5 9.2 2.3 5.5 6 5.5c2 0 3.2 1 4 2 0.8-1 2-2 4-2 3.7 0 5.5 3.7 3.6 7.1C19.2 16.65 12 21 12 21z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 11,\n    columnNumber: 5\n  }, this),\n  Message: props => /*#__PURE__*/_jsxDEV(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    className: \"w-4 h-4\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    ...props,\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M21 15a4 4 0 0 1-4 4H8l-5 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4v8z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 5\n  }, this),\n  Check: props => /*#__PURE__*/_jsxDEV(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\",\n    className: \"w-4 h-4\",\n    ...props,\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M9 16.2l-3.5-3.5L4 14.2 9 19l11-11-1.5-1.5z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 5\n  }, this),\n  ArrowLeft: props => /*#__PURE__*/_jsxDEV(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    className: \"w-4 h-4\",\n    ...props,\n    children: [/*#__PURE__*/_jsxDEV(\"path\", {\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      d: \"M10 19l-7-7 7-7\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      d: \"M3 12h18\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 3\n  }, this)\n};\nconst BackHomeLink = ({\n  isDarkMode\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"mb-8\",\n  children: /*#__PURE__*/_jsxDEV(Link, {\n    to: \"/\",\n    className: `\n        group inline-flex items-center gap-2 rounded-full\n        p-[1px] bg-gradient-to-r from-blue-500/30 via-purple-500/30 to-pink-500/30\n        hover:from-blue-500/50 hover:via-purple-500/50 hover:to-pink-500/50\n        focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/60\n        transition\n      `,\n    \"aria-label\": \"Back to Home\",\n    children: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: `\n          inline-flex items-center gap-2 rounded-full px-3 py-1.5\n          ${isDarkMode ? \"bg-gray-900 text-gray-100 ring-1 ring-gray-700/60\" : \"bg-white text-gray-800 ring-1 ring-gray-200\"}\n        `,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: `\n            inline-flex items-center justify-center w-6 h-6 rounded-full\n            ${isDarkMode ? \"bg-gray-800 text-gray-100\" : \"bg-gray-100 text-gray-700\"}\n            transition-transform group-hover:-translate-x-0.5\n          `,\n        children: /*#__PURE__*/_jsxDEV(Icon.ArrowLeft, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-sm font-medium\",\n        children: \"Back to Home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 33,\n  columnNumber: 3\n}, this);\n_c = BackHomeLink;\nconst CreatorProfile = ({\n  isDarkMode,\n  toggleTheme\n}) => {\n  _s();\n  var _creator$profilePic;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user,\n    loading: authLoading\n  } = useAuth();\n  const [creator, setCreator] = useState(null);\n  const [creatorLoading, setCreatorLoading] = useState(true);\n  const [creatorError, setCreatorError] = useState(null);\n  const [posts, setPosts] = useState([]);\n  const [postsLoading, setPostsLoading] = useState(true);\n  const [isSubscribed, setIsSubscribed] = useState(false);\n  const creatorId = String((creator === null || creator === void 0 ? void 0 : creator._id) || (creator === null || creator === void 0 ? void 0 : creator.id) || id || \"\");\n  const viewerId = String((user === null || user === void 0 ? void 0 : user._id) || (user === null || user === void 0 ? void 0 : user.id) || \"\");\n  const isOwner = Boolean(creatorId && viewerId && creatorId === viewerId);\n\n  // // UI state (local only for now)\n  // const [openComments, setOpenComments] = useState({});     // { [postId]: boolean }\n  // const [likeState, setLikeState] = useState({});           // { [postId]: { liked:boolean, count:number } }\n\n  // 1) public creator profile\n  useEffect(() => {\n    let alive = true;\n    setCreatorLoading(true);\n    fetch(`http://localhost:3002/api/public/creator/${id}`).then(res => {\n      if (!res.ok) throw new Error('Failed to fetch creator');\n      return res.json();\n    }).then(data => {\n      if (alive) {\n        setCreator(data);\n        setCreatorLoading(false);\n      }\n    }).catch(err => {\n      if (alive) {\n        setCreatorError(err.message);\n        setCreatorLoading(false);\n      }\n    });\n    return () => {\n      alive = false;\n    };\n  }, [id]);\n\n  // 2) gated posts by subscription\n  useEffect(() => {\n    let alive = true;\n    setPostsLoading(true);\n    if (!creatorId || authLoading) {\n      setPostsLoading(false);\n      return;\n    }\n    const fetcher = isOwner ? getMyPosts : () => getCreatorPosts(creatorId);\n    fetcher().then(data => {\n      if (!alive) return;\n      // both endpoints often return { posts: [...] } — support both shapes\n      const list = Array.isArray(data) ? data : (data === null || data === void 0 ? void 0 : data.posts) || [];\n      setPosts(list);\n      setIsSubscribed(true); // owner or subscribed viewer\n    }).catch(() => {\n      if (!alive) return;\n      // Only non-owners should ever land here\n      setIsSubscribed(false);\n      setPosts([]);\n    }).finally(() => {\n      if (alive) setPostsLoading(false);\n    });\n    return () => {\n      alive = false;\n    };\n  }, [id, isOwner]);\n\n  // useEffect(() => {\n  //   setOpenComments({});\n  //   setLikeState({});\n  // }, [id]);\n\n  // if (creatorLoading) {\n  //   return (\n  //     <div className={`min-h-screen flex items-center justify-center ${isDarkMode ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'}`}>\n  //       Loading creator...\n  //     </div>\n  //   );\n  // }\n\n  // // Helpers\n  // const getLikeInfo = (post) => {\n  //   const pid = post._id || post.id;\n  //   const local = likeState[pid] || {};\n  //   const baseCount = typeof post.likeCount === 'number' ? post.likeCount : 0;\n  //   return {\n  //     liked: local.liked ?? post.likedByMe ?? false,\n  //     count: local.count ?? baseCount,\n  //   };\n  // };\n\n  // const toggleLike = (post) => {\n  //   const pid = post._id || post.id;\n  //   const { liked, count } = getLikeInfo(post);\n  //   const next = { liked: !liked, count: Math.max(0, count + (liked ? -1 : 1)) };\n  //   setLikeState((prev) => ({ ...prev, [pid]: next }));\n  //   // later: call like/unlike API and handle errors (revert if needed)\n  // };\n\n  if (creatorError || !creator) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `min-h-screen flex items-center justify-center ${isDarkMode ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold mb-4\",\n          children: \"Creator not found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BackHomeLink, {\n          isDarkMode: isDarkMode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this);\n  }\n\n  // inside CreatorProfile.jsx\n  const handleSubscribe = async () => {\n    try {\n      const token = localStorage.getItem(\"token\") || \"\";\n      if (!token) {\n        // not logged in → go login, then come back here\n        navigate(`/login?redirect=/creator/${id}`);\n        return;\n      }\n\n      // ⚠️ Use the EXACT path your server exposes (match your Postman tab)\n      const res = await fetch(`http://localhost:3002/api/private/subscribe/${id}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (res.status === 401) {\n        navigate(`/login?redirect=/creator/${id}`);\n        return;\n      }\n      if (!res.ok) throw new Error(`Subscribe failed (${res.status})`);\n      const data = await res.json();\n\n      // Your server returns { url: session.url } (see your screenshot),\n      // so redirect using data.url (NOT checkoutUrl).\n      if (data.url) {\n        window.location.href = data.url; // go to Stripe Checkout\n        return;\n      }\n\n      // (If you later change server to return { checkoutUrl }, handle it here)\n      if (data.checkoutUrl) {\n        window.location.href = data.checkoutUrl;\n        return;\n      }\n\n      // Fallback if neither key exists\n      throw new Error(\"No checkout URL returned\");\n    } catch (err) {\n      console.error(err);\n      navigate(`/subscribe/${id}/error`);\n    }\n  };\n  const avatar = (creator === null || creator === void 0 ? void 0 : (_creator$profilePic = creator.profilePic) === null || _creator$profilePic === void 0 ? void 0 : _creator$profilePic.url) || '/images/creator.jpg';\n  const displayName = (creator === null || creator === void 0 ? void 0 : creator.username) || (creator === null || creator === void 0 ? void 0 : creator.name) || 'Unknown';\n  const handle = creator !== null && creator !== void 0 && creator.handle ? `@${creator.handle}` : '';\n  const bio = (creator === null || creator === void 0 ? void 0 : creator.bio) || (creator === null || creator === void 0 ? void 0 : creator.description) || '';\n  const postCount = Array.isArray(posts) ? posts.length : 0;\n  const canViewPosts = isOwner || isSubscribed;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `min-h-screen transition-colors duration-300 ${isDarkMode ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'}`,\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      isDarkMode: isDarkMode,\n      toggleTheme: toggleTheme\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed left-4 top-[72px] z-40\",\n      children: /*#__PURE__*/_jsxDEV(BackHomeLink, {\n        isDarkMode: isDarkMode\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 3\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto py-16 px-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-10 rounded-3xl p-[1px] bg-gradient-to-br from-blue-600/20 via-purple-600/20 to-pink-600/20\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `rounded-3xl overflow-hidden border shadow-sm ${isDarkMode ? 'border-gray-700 bg-gray-800' : 'border-gray-200 bg-white'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `h-28 w-full ${isDarkMode ? 'bg-gradient-to-r from-indigo-700 via-purple-700 to-pink-700' : 'bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-6 pt-0\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col sm:flex-row sm:items-end gap-4 -mt-10\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: avatar,\n                alt: displayName,\n                className: \"w-24 h-24 rounded-2xl object-cover ring-4 ring-white/70 dark:ring-gray-900/70 shadow-md transition-transform duration-300\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                    className: \"text-3xl font-bold\",\n                    children: displayName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `inline-flex items-center gap-1 px-2 py-0.5 text-xs rounded-full ${isDarkMode ? 'bg-gray-700 text-gray-200' : 'bg-gray-100 text-gray-700'}`,\n                    children: [/*#__PURE__*/_jsxDEV(Icon.Check, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 258,\n                      columnNumber: 23\n                    }, this), \" Creator\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `mt-1 text-sm ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}`,\n                  children: handle\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 19\n                }, this), bio && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: `mt-3 max-w-2xl ${isDarkMode ? 'text-gray-200' : 'text-gray-700'}`,\n                  children: bio\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-4 flex flex-wrap items-center gap-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `text-sm ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}`,\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-semibold text-gray-900 dark:text-white\",\n                      children: postCount\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 267,\n                      columnNumber: 23\n                    }, this), \" posts\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 21\n                  }, this), !canViewPosts ? /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleSubscribe,\n                    className: \"px-4 py-2 rounded-lg font-medium bg-blue-600 hover:bg-blue-700 text-white transition shadow-lg shadow-blue-600/20 hover:shadow-blue-600/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/50\",\n                    children: \"Subscribe\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 23\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `px-3 py-1 rounded-lg text-sm font-medium ${isDarkMode ? 'bg-green-800/70 text-green-100 border border-green-700/50' : 'bg-green-50 text-green-700 border border-green-200'}`,\n                    children: \"Subscribed\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold mb-4\",\n          children: \"Posts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), postsLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center opacity-70\",\n          children: \"Loading posts\\u2026\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }, this) : canViewPosts ? posts.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: posts.map(post => {\n            const pid = post._id || post.id;\n            return /*#__PURE__*/_jsxDEV(PostCard, {\n              post: post,\n              author: {\n                _id: creator._id || creator.id,\n                username: creator.username || creator.name,\n                handle: creator.handle,\n                profilePic: creator.profilePic\n              },\n              isDarkMode: isDarkMode\n              // onLikeToggle={() => toggleLike(post)}\n            }, pid, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center opacity-70\",\n          children: \"No posts yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center p-[1px] rounded-2xl bg-gradient-to-br from-amber-400/30 via-orange-400/30 to-yellow-400/30\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-8 rounded-2xl bg-yellow-50 border border-yellow-200 text-yellow-900\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"You must subscribe to view this creator's posts.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSubscribe,\n              className: \"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg shadow-lg shadow-blue-600/20 hover:shadow-blue-600/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/50\",\n              children: \"Subscribe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 229,\n    columnNumber: 5\n  }, this);\n};\n_s(CreatorProfile, \"QyLwIBqUASrG41zufBsKK4PMVXk=\", false, function () {\n  return [useParams, useNavigate, useAuth];\n});\n_c2 = CreatorProfile;\nexport default CreatorProfile;\nvar _c, _c2;\n$RefreshReg$(_c, \"BackHomeLink\");\n$RefreshReg$(_c2, \"CreatorProfile\");","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","useNavigate","getCreatorPosts","getMyPosts","useAuth","Navbar","PostCard","jsxDEV","_jsxDEV","Icon","Heart","props","viewBox","fill","className","children","d","fileName","_jsxFileName","lineNumber","columnNumber","Message","stroke","strokeWidth","Check","ArrowLeft","strokeLinecap","strokeLinejoin","BackHomeLink","isDarkMode","to","_c","CreatorProfile","toggleTheme","_s","_creator$profilePic","id","navigate","user","loading","authLoading","creator","setCreator","creatorLoading","setCreatorLoading","creatorError","setCreatorError","posts","setPosts","postsLoading","setPostsLoading","isSubscribed","setIsSubscribed","creatorId","String","_id","viewerId","isOwner","Boolean","alive","fetch","then","res","ok","Error","json","data","catch","err","message","fetcher","list","Array","isArray","finally","handleSubscribe","token","localStorage","getItem","method","headers","Authorization","status","url","window","location","href","checkoutUrl","console","error","avatar","profilePic","displayName","username","name","handle","bio","description","postCount","length","canViewPosts","src","alt","onClick","map","post","pid","author","_c2","$RefreshReg$"],"sources":["/Users/chawsuhan/Music/git-test/sem7-project/project/src/components/CreatorProfile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { getCreatorPosts, getMyPosts } from '../services/posts';\nimport { useAuth } from '../AuthContext';\nimport Navbar from './Navbar';\nimport PostCard from \"./PostCard\";\n\n// lightweight inline icons (no library)\nconst Icon = {\n  Heart: (props) => (\n    <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-4 h-4\" {...props}>\n      <path d=\"M12 21s-7.2-4.35-9.6-8.4C.5 9.2 2.3 5.5 6 5.5c2 0 3.2 1 4 2 0.8-1 2-2 4-2 3.7 0 5.5 3.7 3.6 7.1C19.2 16.65 12 21 12 21z\" />\n    </svg>\n  ),\n  Message: (props) => (\n    <svg viewBox=\"0 0 24 24\" fill=\"none\" className=\"w-4 h-4\" stroke=\"currentColor\" strokeWidth=\"2\" {...props}>\n      <path d=\"M21 15a4 4 0 0 1-4 4H8l-5 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4v8z\" />\n    </svg>\n  ),\n  Check: (props) => (\n    <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-4 h-4\" {...props}>\n      <path d=\"M9 16.2l-3.5-3.5L4 14.2 9 19l11-11-1.5-1.5z\" />\n    </svg>\n  ),\n  ArrowLeft: (props) => (\n  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" className=\"w-4 h-4\" {...props}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M10 19l-7-7 7-7\" />\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 12h18\" />\n  </svg>\n),\n};\nconst BackHomeLink = ({ isDarkMode }) => (\n  <div className=\"mb-8\">\n    <Link\n      to=\"/\"\n      className={`\n        group inline-flex items-center gap-2 rounded-full\n        p-[1px] bg-gradient-to-r from-blue-500/30 via-purple-500/30 to-pink-500/30\n        hover:from-blue-500/50 hover:via-purple-500/50 hover:to-pink-500/50\n        focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/60\n        transition\n      `}\n      aria-label=\"Back to Home\"\n    >\n      <span\n        className={`\n          inline-flex items-center gap-2 rounded-full px-3 py-1.5\n          ${isDarkMode ? \"bg-gray-900 text-gray-100 ring-1 ring-gray-700/60\" : \"bg-white text-gray-800 ring-1 ring-gray-200\"}\n        `}\n      >\n        <span\n          className={`\n            inline-flex items-center justify-center w-6 h-6 rounded-full\n            ${isDarkMode ? \"bg-gray-800 text-gray-100\" : \"bg-gray-100 text-gray-700\"}\n            transition-transform group-hover:-translate-x-0.5\n          `}\n        >\n          <Icon.ArrowLeft />\n        </span>\n        <span className=\"text-sm font-medium\">Back to Home</span>\n      </span>\n    </Link>\n  </div>\n);\n\nconst CreatorProfile = ({ isDarkMode, toggleTheme }) => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { user, loading: authLoading } = useAuth();\n\n  const [creator, setCreator] = useState(null);\n  const [creatorLoading, setCreatorLoading] = useState(true);\n  const [creatorError, setCreatorError] = useState(null);\n\n  const [posts, setPosts] = useState([]);\n  const [postsLoading, setPostsLoading] = useState(true);\n  const [isSubscribed, setIsSubscribed] = useState(false);\n  const creatorId = String(creator?._id || creator?.id || id || \"\");\n  const viewerId  = String(user?._id || user?.id || \"\");\n  const isOwner   = Boolean(creatorId && viewerId && creatorId === viewerId);\n\n\n  // // UI state (local only for now)\n  // const [openComments, setOpenComments] = useState({});     // { [postId]: boolean }\n  // const [likeState, setLikeState] = useState({});           // { [postId]: { liked:boolean, count:number } }\n\n  // 1) public creator profile\n  useEffect(() => {\n    let alive = true;\n    setCreatorLoading(true);\n\n    fetch(`http://localhost:3002/api/public/creator/${id}`)\n      .then(res => {\n        if (!res.ok) throw new Error('Failed to fetch creator');\n        return res.json();\n      })\n      .then(data => { if (alive) { setCreator(data); setCreatorLoading(false); } })\n      .catch(err => { if (alive) { setCreatorError(err.message); setCreatorLoading(false); } });\n\n    return () => { alive = false; };\n  }, [id]);\n\n  // 2) gated posts by subscription\n  useEffect(() => {\n    let alive = true;\n    setPostsLoading(true);\n\n     if (!creatorId || authLoading) { setPostsLoading(false); return; }\n     const fetcher = isOwner ? getMyPosts : () => getCreatorPosts(creatorId);\n\n      fetcher()\n      .then(data => {\n        if (!alive) return;\n        // both endpoints often return { posts: [...] } — support both shapes\n        const list = Array.isArray(data) ? data : (data?.posts || []);\n        setPosts(list);\n        setIsSubscribed(true);            // owner or subscribed viewer\n      })\n      .catch(() => {\n        if (!alive) return;\n        // Only non-owners should ever land here\n        setIsSubscribed(false);\n        setPosts([]);\n      })\n      .finally(() => { if (alive) setPostsLoading(false); });\n\n    return () => { alive = false; };\n  }, [id, isOwner]);\n\n  // useEffect(() => {\n  //   setOpenComments({});\n  //   setLikeState({});\n  // }, [id]);\n\n  // if (creatorLoading) {\n  //   return (\n  //     <div className={`min-h-screen flex items-center justify-center ${isDarkMode ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'}`}>\n  //       Loading creator...\n  //     </div>\n  //   );\n  // }\n\n  // // Helpers\n  // const getLikeInfo = (post) => {\n  //   const pid = post._id || post.id;\n  //   const local = likeState[pid] || {};\n  //   const baseCount = typeof post.likeCount === 'number' ? post.likeCount : 0;\n  //   return {\n  //     liked: local.liked ?? post.likedByMe ?? false,\n  //     count: local.count ?? baseCount,\n  //   };\n  // };\n\n  // const toggleLike = (post) => {\n  //   const pid = post._id || post.id;\n  //   const { liked, count } = getLikeInfo(post);\n  //   const next = { liked: !liked, count: Math.max(0, count + (liked ? -1 : 1)) };\n  //   setLikeState((prev) => ({ ...prev, [pid]: next }));\n  //   // later: call like/unlike API and handle errors (revert if needed)\n  // };\n\n  if (creatorError || !creator) {\n    return (\n      <div className={`min-h-screen flex items-center justify-center ${isDarkMode ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'}`}>\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold mb-4\">Creator not found</h2>\n          <BackHomeLink isDarkMode={isDarkMode} />\n        </div>\n      </div>\n    );\n  }\n\n  // inside CreatorProfile.jsx\n  const handleSubscribe = async () => {\n    try {\n      const token = localStorage.getItem(\"token\") || \"\";\n      if (!token) {\n        // not logged in → go login, then come back here\n        navigate(`/login?redirect=/creator/${id}`);\n        return;\n      }\n\n      // ⚠️ Use the EXACT path your server exposes (match your Postman tab)\n      const res = await fetch(`http://localhost:3002/api/private/subscribe/${id}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n      });\n\n      if (res.status === 401) {\n        navigate(`/login?redirect=/creator/${id}`);\n        return;\n      }\n      if (!res.ok) throw new Error(`Subscribe failed (${res.status})`);\n\n      const data = await res.json();\n\n      // Your server returns { url: session.url } (see your screenshot),\n      // so redirect using data.url (NOT checkoutUrl).\n      if (data.url) {\n        window.location.href = data.url;          // go to Stripe Checkout\n        return;\n      }\n\n      // (If you later change server to return { checkoutUrl }, handle it here)\n      if (data.checkoutUrl) {\n        window.location.href = data.checkoutUrl;\n        return;\n      }\n\n      // Fallback if neither key exists\n      throw new Error(\"No checkout URL returned\");\n    } catch (err) {\n      console.error(err);\n      navigate(`/subscribe/${id}/error`);\n    }\n  };\n\n  const avatar = creator?.profilePic?.url || '/images/creator.jpg';\n  const displayName = creator?.username || creator?.name || 'Unknown';\n  const handle = creator?.handle ? `@${creator.handle}` : '';\n  const bio = creator?.bio || creator?.description || '';\n  const postCount = Array.isArray(posts) ? posts.length : 0;\n  const canViewPosts = isOwner || isSubscribed;\n\n  return (\n    <div className={`min-h-screen transition-colors duration-300 ${isDarkMode ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'}`}>\n      <Navbar isDarkMode={isDarkMode} toggleTheme={toggleTheme} /> {/* ✅ no auth props */}\n      <div className=\"fixed left-4 top-[72px] z-40\">\n  <BackHomeLink isDarkMode={isDarkMode} />\n</div>\n      <div className=\"max-w-3xl mx-auto py-16 px-4\">\n\n\n        {/* Profile header card */}\n        <div className=\"mb-10 rounded-3xl p-[1px] bg-gradient-to-br from-blue-600/20 via-purple-600/20 to-pink-600/20\">\n          <div className={`rounded-3xl overflow-hidden border shadow-sm ${isDarkMode ? 'border-gray-700 bg-gray-800' : 'border-gray-200 bg-white'}`}>\n            {/* Cover (placeholder gradient) */}\n            <div className={`h-28 w-full ${isDarkMode ? 'bg-gradient-to-r from-indigo-700 via-purple-700 to-pink-700' : 'bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500'}`} />\n\n            {/* Header content */}\n            <div className=\"p-6 pt-0\">\n              <div className=\"flex flex-col sm:flex-row sm:items-end gap-4 -mt-10\">\n                {/* Avatar */}\n                <img\n                  src={avatar}\n                  alt={displayName}\n                  className=\"w-24 h-24 rounded-2xl object-cover ring-4 ring-white/70 dark:ring-gray-900/70 shadow-md transition-transform duration-300\"\n                />\n\n                {/* Name + meta */}\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2\">\n                    <h1 className=\"text-3xl font-bold\">{displayName}</h1>\n                    <span className={`inline-flex items-center gap-1 px-2 py-0.5 text-xs rounded-full ${isDarkMode ? 'bg-gray-700 text-gray-200' : 'bg-gray-100 text-gray-700'}`}>\n                      <Icon.Check /> Creator\n                    </span>\n                  </div>\n                  <div className={`mt-1 text-sm ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}`}>{handle}</div>\n                  {bio && <p className={`mt-3 max-w-2xl ${isDarkMode ? 'text-gray-200' : 'text-gray-700'}`}>{bio}</p>}\n\n                  {/* Stats + CTA */}\n                  <div className=\"mt-4 flex flex-wrap items-center gap-3\">\n                    <div className={`text-sm ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      <span className=\"font-semibold text-gray-900 dark:text-white\">{postCount}</span> posts\n                    </div>\n\n                    <div className=\"flex-1\" />\n\n                    {!canViewPosts ? (\n                      <button\n                        onClick={handleSubscribe}\n                        className=\"px-4 py-2 rounded-lg font-medium bg-blue-600 hover:bg-blue-700 text-white transition shadow-lg shadow-blue-600/20 hover:shadow-blue-600/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/50\"\n                      >\n                        Subscribe\n                      </button>\n                    ) : (\n                      <span className={`px-3 py-1 rounded-lg text-sm font-medium ${isDarkMode ? 'bg-green-800/70 text-green-100 border border-green-700/50' : 'bg-green-50 text-green-700 border border-green-200'}`}>\n                        Subscribed\n                      </span>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n\n        <div>\n          <h2 className=\"text-2xl font-semibold mb-4\">Posts</h2>\n\n          {postsLoading ? (\n            <div className=\"text-center opacity-70\">Loading posts…</div>\n          ) : canViewPosts ? (\n            posts.length ? (\n              <div className=\"space-y-6\">\n                {posts.map((post) => {\n                  const pid = post._id || post.id;\n\n                  return (\n                    <PostCard\n                      key={pid}\n                      post={post}\n                      author={{\n                        _id: creator._id || creator.id,\n                        username: creator.username || creator.name,\n                        handle: creator.handle,\n                        profilePic: creator.profilePic,\n                      }}\n                      isDarkMode={isDarkMode}\n                      // onLikeToggle={() => toggleLike(post)}\n                    />\n\n                  );\n                })}\n              </div>\n            ) : (\n              <div className=\"text-center opacity-70\">No posts yet.</div>\n            )\n          ) : (\n            <div className=\"text-center p-[1px] rounded-2xl bg-gradient-to-br from-amber-400/30 via-orange-400/30 to-yellow-400/30\">\n              <div className=\"p-8 rounded-2xl bg-yellow-50 border border-yellow-200 text-yellow-900\">\n                <p>You must subscribe to view this creator's posts.</p>\n                <button onClick={handleSubscribe} className=\"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg shadow-lg shadow-blue-600/20 hover:shadow-blue-600/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/50\">\n                  Subscribe\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CreatorProfile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}