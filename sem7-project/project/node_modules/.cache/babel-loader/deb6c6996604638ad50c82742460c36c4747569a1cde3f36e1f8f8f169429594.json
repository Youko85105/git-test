{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nexport function useUser() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    var _match$groups;\n    const match = document.cookie.match(/userId=(?<id>[^;]+)/);\n    const id = match === null || match === void 0 ? void 0 : (_match$groups = match.groups) === null || _match$groups === void 0 ? void 0 : _match$groups.id;\n    console.log(\"🔍 Fetching user from cookie:\", id);\n    if (id) {\n      fetch(`${process.env.REACT_APP_SERVER_URL}/users/${id}`, {\n        credentials: \"include\"\n      }).then(res => res.json()).then(data => {\n        console.log(\"✅ User fetched:\", data);\n        setUser({\n          ...data,\n          id: data._id\n        }); // 🔄 add this\n      }).catch(err => {\n        console.error(\"❌ Failed to fetch user:\", err);\n      }).finally(() => setLoading(false));\n    } else {\n      setLoading(false);\n    }\n  }, []);\n  return {\n    user,\n    loading\n  };\n}\n_s(useUser, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");","map":{"version":3,"names":["useEffect","useState","useUser","_s","user","setUser","loading","setLoading","_match$groups","match","document","cookie","id","groups","console","log","fetch","process","env","REACT_APP_SERVER_URL","credentials","then","res","json","data","_id","catch","err","error","finally"],"sources":["/Users/chawsuhan/git-test/sem7-project/project/src/hooks/useUser.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\n\nexport function useUser() {\n  const [user, setUser] = useState(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const match = document.cookie.match(/userId=(?<id>[^;]+)/)\n    const id = match?.groups?.id\n    console.log(\"🔍 Fetching user from cookie:\", id)\n\n    if (id) {\n      fetch(`${process.env.REACT_APP_SERVER_URL}/users/${id}`, {\n        credentials: \"include\"\n      })\n        .then(res => res.json())\n        .then(data => {\n          console.log(\"✅ User fetched:\", data)\n          setUser({ ...data, id: data._id }) // 🔄 add this\n        })\n        .catch(err => {\n          console.error(\"❌ Failed to fetch user:\", err)\n        })\n        .finally(() => setLoading(false))\n    } else {\n      setLoading(false)\n    }\n  }, [])\n\n  return { user, loading }\n}"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,OAAO,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGJ,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACK,OAAO,EAAEC,UAAU,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAE5CD,SAAS,CAAC,MAAM;IAAA,IAAAQ,aAAA;IACd,MAAMC,KAAK,GAAGC,QAAQ,CAACC,MAAM,CAACF,KAAK,CAAC,qBAAqB,CAAC;IAC1D,MAAMG,EAAE,GAAGH,KAAK,aAALA,KAAK,wBAAAD,aAAA,GAALC,KAAK,CAAEI,MAAM,cAAAL,aAAA,uBAAbA,aAAA,CAAeI,EAAE;IAC5BE,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEH,EAAE,CAAC;IAEhD,IAAIA,EAAE,EAAE;MACNI,KAAK,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,oBAAoB,UAAUP,EAAE,EAAE,EAAE;QACvDQ,WAAW,EAAE;MACf,CAAC,CAAC,CACCC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,IAAI;QACZV,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAES,IAAI,CAAC;QACpCnB,OAAO,CAAC;UAAE,GAAGmB,IAAI;UAAEZ,EAAE,EAAEY,IAAI,CAACC;QAAI,CAAC,CAAC,EAAC;MACrC,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,IAAI;QACZb,OAAO,CAACc,KAAK,CAAC,yBAAyB,EAAED,GAAG,CAAC;MAC/C,CAAC,CAAC,CACDE,OAAO,CAAC,MAAMtB,UAAU,CAAC,KAAK,CAAC,CAAC;IACrC,CAAC,MAAM;MACLA,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEH,IAAI;IAAEE;EAAQ,CAAC;AAC1B;AAACH,EAAA,CA5BeD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}