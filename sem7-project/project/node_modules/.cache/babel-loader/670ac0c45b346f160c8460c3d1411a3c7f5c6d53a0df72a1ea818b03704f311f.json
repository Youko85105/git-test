{"ast":null,"code":"var _jsxFileName = \"/Users/chawsuhan/git-test/sem7-project/project/src/components/CreatorProfile.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { getCreatorPosts } from '../services/posts';\nimport CommentsSection from './CommentsSection';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreatorProfile = ({\n  isDarkMode\n}) => {\n  _s();\n  var _creator$profilePic;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [creator, setCreator] = useState(null);\n  const [creatorLoading, setCreatorLoading] = useState(true);\n  const [creatorError, setCreatorError] = useState(null);\n  const [posts, setPosts] = useState([]);\n  const [postsLoading, setPostsLoading] = useState(true);\n  const [isSubscribed, setIsSubscribed] = useState(false);\n\n  // UI state (local only for now)\n  const [openComments, setOpenComments] = useState({}); // { [postId]: boolean }\n  const [likeState, setLikeState] = useState({}); // { [postId]: { liked:boolean, count:number } }\n\n  // 1) public creator profile\n  useEffect(() => {\n    let alive = true;\n    setCreatorLoading(true);\n    fetch(`http://localhost:3002/api/public/creator/${id}`).then(res => {\n      if (!res.ok) throw new Error('Failed to fetch creator');\n      return res.json();\n    }).then(data => {\n      if (alive) {\n        setCreator(data);\n        setCreatorLoading(false);\n      }\n    }).catch(err => {\n      if (alive) {\n        setCreatorError(err.message);\n        setCreatorLoading(false);\n      }\n    });\n    return () => {\n      alive = false;\n    };\n  }, [id]);\n\n  // 2) gated posts by subscription\n  useEffect(() => {\n    let alive = true;\n    setPostsLoading(true);\n    getCreatorPosts(id).then(data => {\n      if (!alive) return;\n      setIsSubscribed(true);\n      setPosts(Array.isArray(data) ? data : (data === null || data === void 0 ? void 0 : data.posts) || []);\n    }).catch(() => {\n      if (!alive) return;\n      // Any failure (e.g., 401) => treat as not subscribed\n      setIsSubscribed(false);\n      setPosts([]);\n    }).finally(() => {\n      if (alive) setPostsLoading(false);\n    });\n    return () => {\n      alive = false;\n    };\n  }, [id]);\n  useEffect(() => {\n    setOpenComments({});\n    setLikeState({});\n  }, [id]);\n  if (creatorLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `min-h-screen flex items-center justify-center ${isDarkMode ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'}`,\n      children: \"Loading creator...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Helpers\n  const getLikeInfo = post => {\n    var _ref, _local$liked, _local$count;\n    const pid = post._id || post.id;\n    const local = likeState[pid] || {};\n    const baseCount = typeof post.likeCount === 'number' ? post.likeCount : 0;\n    return {\n      liked: (_ref = (_local$liked = local.liked) !== null && _local$liked !== void 0 ? _local$liked : post.likedByMe) !== null && _ref !== void 0 ? _ref : false,\n      count: (_local$count = local.count) !== null && _local$count !== void 0 ? _local$count : baseCount\n    };\n  };\n  const toggleComment = postId => setOpenComments(prev => ({\n    ...prev,\n    [postId]: !prev[postId]\n  }));\n  const toggleLike = post => {\n    const pid = post._id || post.id;\n    const {\n      liked,\n      count\n    } = getLikeInfo(post);\n    const next = {\n      liked: !liked,\n      count: Math.max(0, count + (liked ? -1 : 1))\n    };\n    setLikeState(prev => ({\n      ...prev,\n      [pid]: next\n    }));\n    // later: call like/unlike API and handle errors (revert if needed)\n  };\n  if (creatorError || !creator) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `min-h-screen flex items-center justify-center ${isDarkMode ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold mb-4\",\n          children: \"Creator not found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"text-blue-500 underline\",\n          children: \"Back to Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this);\n  }\n\n  // inside CreatorProfile.jsx\n  const handleSubscribe = async () => {\n    try {\n      const token = localStorage.getItem(\"token\") || \"\";\n      if (!token) {\n        // not logged in → go login, then come back here\n        navigate(`/login?redirect=/creator/${id}`);\n        return;\n      }\n\n      // ⚠️ Use the EXACT path your server exposes (match your Postman tab)\n      const res = await fetch(`http://localhost:3002/api/private/subscribe/${id}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (res.status === 401) {\n        navigate(`/login?redirect=/creator/${id}`);\n        return;\n      }\n      if (!res.ok) throw new Error(`Subscribe failed (${res.status})`);\n      const data = await res.json();\n\n      // Your server returns { url: session.url } (see your screenshot),\n      // so redirect using data.url (NOT checkoutUrl).\n      if (data.url) {\n        window.location.href = data.url; // go to Stripe Checkout\n        return;\n      }\n\n      // (If you later change server to return { checkoutUrl }, handle it here)\n      if (data.checkoutUrl) {\n        window.location.href = data.checkoutUrl;\n        return;\n      }\n\n      // Fallback if neither key exists\n      throw new Error(\"No checkout URL returned\");\n    } catch (err) {\n      console.error(err);\n      navigate(`/subscribe/${id}/error`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `min-h-screen transition-colors duration-300 ${isDarkMode ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto py-16 px-4\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"text-blue-500 underline mb-8 inline-block\",\n        children: \"\\u2190 Back to Home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col items-center mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: ((_creator$profilePic = creator.profilePic) === null || _creator$profilePic === void 0 ? void 0 : _creator$profilePic.url) || '/images/creator.jpg',\n          alt: creator.username || creator.name,\n          className: \"w-32 h-32 rounded-full mb-4 object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-4xl font-bold mb-2\",\n          children: creator.username || creator.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg text-center mb-4\",\n          children: creator.bio || creator.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold mb-4\",\n          children: \"Posts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), postsLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center opacity-70\",\n          children: \"Loading posts\\u2026\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }, this) : isSubscribed ? posts.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: posts.map(post => {\n            const pid = post._id || post.id;\n            const likeInfo = getLikeInfo(post);\n            const bookmarked = !!bookmarks[pid];\n            const commentsOpen = !!openComments[pid];\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `p-6 rounded-xl shadow border ${isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl font-bold mb-2\",\n                children: post.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"whitespace-pre-wrap\",\n                children: post.content || post.body\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 flex flex-wrap gap-3 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => toggleLike(post),\n                  className: `px-3 py-1 rounded border transition ${likeInfo.liked ? 'bg-blue-600 text-white border-blue-600' : isDarkMode ? 'border-gray-600 hover:bg-gray-700' : 'border-gray-300 hover:bg-gray-100'}`,\n                  \"aria-pressed\": likeInfo.liked,\n                  children: [likeInfo.liked ? 'Liked' : 'Like', likeInfo.count ? ` • ${likeInfo.count}` : '']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => toggleComment(pid),\n                  className: `${isDarkMode ? 'bg-gray-700 text-white hover:bg-gray-600' : 'bg-gray-100 hover:bg-gray-200'} px-3 py-1 rounded border ${isDarkMode ? 'border-gray-600' : 'border-gray-300'} transition`,\n                  \"aria-expanded\": commentsOpen,\n                  children: commentsOpen ? 'Hide Comments' : 'Comment'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => toggleBookmark(pid),\n                  className: `px-3 py-1 rounded border transition ${bookmarked ? 'bg-amber-500 text-white border-amber-500' : isDarkMode ? 'border-gray-600 hover:bg-gray-700' : 'border-gray-300 hover:bg-gray-100'}`,\n                  \"aria-pressed\": bookmarked,\n                  children: bookmarked ? 'Bookmarked' : 'Bookmark'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 23\n              }, this), commentsOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-5\",\n                children: /*#__PURE__*/_jsxDEV(CommentsSection, {\n                  postId: pid,\n                  title: \"Comments\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 25\n              }, this)]\n            }, post._id || post.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center opacity-70\",\n          children: \"No posts yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center p-8 border rounded-xl bg-yellow-100 text-yellow-800\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"You must subscribe to view this creator's posts.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSubscribe,\n            className: \"mt-4 px-6 py-2 bg-blue-600 text-white rounded\",\n            children: \"Subscribe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 5\n  }, this);\n};\n_s(CreatorProfile, \"cuXYhpFxqSAOWJOe3o004h7jews=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = CreatorProfile;\nexport default CreatorProfile;\nvar _c;\n$RefreshReg$(_c, \"CreatorProfile\");","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","useNavigate","getCreatorPosts","CommentsSection","jsxDEV","_jsxDEV","CreatorProfile","isDarkMode","_s","_creator$profilePic","id","navigate","creator","setCreator","creatorLoading","setCreatorLoading","creatorError","setCreatorError","posts","setPosts","postsLoading","setPostsLoading","isSubscribed","setIsSubscribed","openComments","setOpenComments","likeState","setLikeState","alive","fetch","then","res","ok","Error","json","data","catch","err","message","Array","isArray","finally","className","children","fileName","_jsxFileName","lineNumber","columnNumber","getLikeInfo","post","_ref","_local$liked","_local$count","pid","_id","local","baseCount","likeCount","liked","likedByMe","count","toggleComment","postId","prev","toggleLike","next","Math","max","to","handleSubscribe","token","localStorage","getItem","method","headers","Authorization","status","url","window","location","href","checkoutUrl","console","error","src","profilePic","alt","username","name","bio","description","length","map","likeInfo","bookmarked","bookmarks","commentsOpen","title","content","body","onClick","toggleBookmark","_c","$RefreshReg$"],"sources":["/Users/chawsuhan/git-test/sem7-project/project/src/components/CreatorProfile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { getCreatorPosts } from '../services/posts';\nimport CommentsSection from './CommentsSection';\n\nconst CreatorProfile = ({ isDarkMode }) => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n\n  const [creator, setCreator] = useState(null);\n  const [creatorLoading, setCreatorLoading] = useState(true);\n  const [creatorError, setCreatorError] = useState(null);\n\n  const [posts, setPosts] = useState([]);\n  const [postsLoading, setPostsLoading] = useState(true);\n  const [isSubscribed, setIsSubscribed] = useState(false);\n\n    // UI state (local only for now)\n  const [openComments, setOpenComments] = useState({});     // { [postId]: boolean }\n  const [likeState, setLikeState] = useState({});           // { [postId]: { liked:boolean, count:number } }\n\n  // 1) public creator profile\n  useEffect(() => {\n    let alive = true;\n    setCreatorLoading(true);\n\n    fetch(`http://localhost:3002/api/public/creator/${id}`)\n      .then(res => {\n        if (!res.ok) throw new Error('Failed to fetch creator');\n        return res.json();\n      })\n      .then(data => { if (alive) { setCreator(data); setCreatorLoading(false); } })\n      .catch(err => { if (alive) { setCreatorError(err.message); setCreatorLoading(false); } });\n\n    return () => { alive = false; };\n  }, [id]);\n\n  // 2) gated posts by subscription\n  useEffect(() => {\n    let alive = true;\n    setPostsLoading(true);\n\n    getCreatorPosts(id)\n      .then(data => {\n        if (!alive) return;\n        setIsSubscribed(true);\n        setPosts(Array.isArray(data) ? data : (data?.posts || []));\n      })\n      .catch(() => {\n        if (!alive) return;\n        // Any failure (e.g., 401) => treat as not subscribed\n        setIsSubscribed(false);\n        setPosts([]);\n      })\n      .finally(() => { if (alive) setPostsLoading(false); });\n\n    return () => { alive = false; };\n  }, [id]);\n\n  useEffect(() => {\n  setOpenComments({});\n  setLikeState({});\n}, [id]);\n\n  if (creatorLoading) {\n    return (\n      <div className={`min-h-screen flex items-center justify-center ${isDarkMode ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'}`}>\n        Loading creator...\n      </div>\n    );\n  }\n\n    // Helpers\n  const getLikeInfo = (post) => {\n    const pid = post._id || post.id;\n    const local = likeState[pid] || {};\n    const baseCount = typeof post.likeCount === 'number' ? post.likeCount : 0;\n    return {\n      liked: local.liked ?? post.likedByMe ?? false,\n      count: local.count ?? baseCount,\n    };\n  };\n  const toggleComment = (postId) =>\n    setOpenComments((prev) => ({ ...prev, [postId]: !prev[postId] }));\n\n  const toggleLike = (post) => {\n    const pid = post._id || post.id;\n    const { liked, count } = getLikeInfo(post);\n    const next = { liked: !liked, count: Math.max(0, count + (liked ? -1 : 1)) };\n    setLikeState((prev) => ({ ...prev, [pid]: next }));\n    // later: call like/unlike API and handle errors (revert if needed)\n  };\n\n  if (creatorError || !creator) {\n    return (\n      <div className={`min-h-screen flex items-center justify-center ${isDarkMode ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'}`}>\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold mb-4\">Creator not found</h2>\n          <Link to=\"/\" className=\"text-blue-500 underline\">Back to Home</Link>\n        </div>\n      </div>\n    );\n  }\n\n  // inside CreatorProfile.jsx\nconst handleSubscribe = async () => {\n  try {\n    const token = localStorage.getItem(\"token\") || \"\";\n    if (!token) {\n      // not logged in → go login, then come back here\n      navigate(`/login?redirect=/creator/${id}`);\n      return;\n    }\n\n    // ⚠️ Use the EXACT path your server exposes (match your Postman tab)\n    const res = await fetch(`http://localhost:3002/api/private/subscribe/${id}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    if (res.status === 401) {\n      navigate(`/login?redirect=/creator/${id}`);\n      return;\n    }\n    if (!res.ok) throw new Error(`Subscribe failed (${res.status})`);\n\n    const data = await res.json();\n\n    // Your server returns { url: session.url } (see your screenshot),\n    // so redirect using data.url (NOT checkoutUrl).\n    if (data.url) {\n      window.location.href = data.url;          // go to Stripe Checkout\n      return;\n    }\n\n    // (If you later change server to return { checkoutUrl }, handle it here)\n    if (data.checkoutUrl) {\n      window.location.href = data.checkoutUrl;\n      return;\n    }\n\n    // Fallback if neither key exists\n    throw new Error(\"No checkout URL returned\");\n  } catch (err) {\n    console.error(err);\n    navigate(`/subscribe/${id}/error`);\n  }\n};\n\n\n  return (\n    <div className={`min-h-screen transition-colors duration-300 ${isDarkMode ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'}`}>\n      <div className=\"max-w-3xl mx-auto py-16 px-4\">\n        <Link to=\"/\" className=\"text-blue-500 underline mb-8 inline-block\">← Back to Home</Link>\n\n        <div className=\"flex flex-col items-center mb-8\">\n          <img\n            src={creator.profilePic?.url || '/images/creator.jpg'}\n            alt={creator.username || creator.name}\n            className=\"w-32 h-32 rounded-full mb-4 object-cover\"\n          />\n          <h1 className=\"text-4xl font-bold mb-2\">{creator.username || creator.name}</h1>\n          <p className=\"text-lg text-center mb-4\">{creator.bio || creator.description}</p>\n        </div>\n\n        <div>\n          <h2 className=\"text-2xl font-semibold mb-4\">Posts</h2>\n\n          {postsLoading ? (\n            <div className=\"text-center opacity-70\">Loading posts…</div>\n          ) : isSubscribed ? (\n            posts.length ? (\n              <div className=\"space-y-6\">\n                {posts.map((post) => {\n                  const pid = post._id || post.id;\n                  const likeInfo = getLikeInfo(post);\n                  const bookmarked = !!bookmarks[pid];\n                  const commentsOpen = !!openComments[pid];\n\n                  return (\n                    <div\n                      key={post._id || post.id}\n                      className={`p-6 rounded-xl shadow border ${isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}`}\n                    >\n                      <h3 className=\"text-xl font-bold mb-2\">{post.title}</h3>\n                      <p className=\"whitespace-pre-wrap\">{post.content || post.body}</p>\n\n                      {/* Action bar */}\n                      <div className=\"mt-4 flex flex-wrap gap-3 text-sm\">\n                        <button\n                          onClick={() => toggleLike(post)}\n                          className={`px-3 py-1 rounded border transition ${\n                            likeInfo.liked\n                              ? 'bg-blue-600 text-white border-blue-600'\n                              : isDarkMode\n                                ? 'border-gray-600 hover:bg-gray-700'\n                                : 'border-gray-300 hover:bg-gray-100'\n                          }`}\n                          aria-pressed={likeInfo.liked}\n                        >\n                          {likeInfo.liked ? 'Liked' : 'Like'}{likeInfo.count ? ` • ${likeInfo.count}` : ''}\n                        </button>\n\n                        <button\n                          onClick={() => toggleComment(pid)}\n                          className={`${isDarkMode ? 'bg-gray-700 text-white hover:bg-gray-600' : 'bg-gray-100 hover:bg-gray-200'} px-3 py-1 rounded border ${\n                            isDarkMode ? 'border-gray-600' : 'border-gray-300'\n                          } transition`}\n                          aria-expanded={commentsOpen}\n                        >\n                          {commentsOpen ? 'Hide Comments' : 'Comment'}\n                        </button>\n\n                        <button\n                          onClick={() => toggleBookmark(pid)}\n                          className={`px-3 py-1 rounded border transition ${\n                            bookmarked\n                              ? 'bg-amber-500 text-white border-amber-500'\n                              : isDarkMode\n                                ? 'border-gray-600 hover:bg-gray-700'\n                                : 'border-gray-300 hover:bg-gray-100'\n                          }`}\n                          aria-pressed={bookmarked}\n                        >\n                          {bookmarked ? 'Bookmarked' : 'Bookmark'}\n                        </button>\n                      </div>\n\n                      {/* Comments drawer */}\n                      {commentsOpen && (\n                        <div className=\"mt-5\">\n                          <CommentsSection postId={pid} title=\"Comments\" />\n                        </div>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            ) : (\n              <div className=\"text-center opacity-70\">No posts yet.</div>\n            )\n          ) : (\n            <div className=\"text-center p-8 border rounded-xl bg-yellow-100 text-yellow-800\">\n              <p>You must subscribe to view this creator's posts.</p>\n              <button onClick={handleSubscribe} className=\"mt-4 px-6 py-2 bg-blue-600 text-white rounded\">\n  Subscribe\n</button>\n\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CreatorProfile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}